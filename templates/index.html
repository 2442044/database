{% extends "layout.html" %}
{% block content %}
<h2>システム状況（{{ now }}）</h2>

<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 2rem;">
    <div style="background: #e1f5fe; padding: 1.5rem; border-radius: 8px; text-align: center;">
        <h3>登録ユーザー数</h3>
        <p style="font-size: 2rem; margin: 0; color: #0288d1;">{{ user_count }} 名</p>
    </div>
    <div style="background: #e8f5e9; padding: 1.5rem; border-radius: 8px; text-align: center;">
        <h3>登録DVD数</h3>
        <p style="font-size: 2rem; margin: 0; color: #388e3c;">{{ dvd_count }} 本</p>
    </div>
    <div style="background: #fff3e0; padding: 1.5rem; border-radius: 8px; text-align: center;">
        <h3>貸出中</h3>
        <p style="font-size: 2rem; margin: 0; color: #f57c00;">{{ active_rentals }} 本</p>
    </div>
    <div style="background: #f3e5f5; padding: 1.5rem; border-radius: 8px; text-align: center;">
        <h3>本日の貸出</h3>
        <p style="font-size: 2rem; margin: 0; color: #7b1fa2;">{{ today_rentals }} 件</p>
    </div>
</div>

<h3>最近のレンタル履歴</h3>
<table>
    <thead>
        <tr>
            <th>レンタル日</th>
            <th>ユーザー</th>
            <th>DVDタイトル</th>
            <th>状態</th>
        </tr>
    </thead>
    <tbody>
        {% for rental in recent_rentals %}
        <tr>
            <td>{{ rental.rental_date }}</td>
            <td>{{ rental.user_name }}</td>
            <td>{{ rental.dvd_title }}</td>
            <td>
                {% if rental.return_date %}
                <span class="badge badge-success">返却済</span>
                {% else %}
                <span class="badge badge-warning">貸出中</span>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<div style="margin-top: 2rem;">
    <a href="{{ url_for('rental_page') }}" class="btn btn-primary">貸出・返却ページへ</a>
    <a href="{{ url_for('dvds') }}" class="btn btn-secondary">DVDを探す</a>
</div>
{% endblock %}
